"use strict";(globalThis.webpackChunkmy_api_docs=globalThis.webpackChunkmy_api_docs||[]).push([[790],{4825:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"operation-mode/c-aurora-js-example-script-lifecycle","title":"Example Script Lifecycle","description":"The lifecycle of the script includes four stages: deployment, two iterations, and edit mode.","source":"@site/docs/operation-mode/c-aurora-js-example-script-lifecycle.mdx","sourceDirName":"operation-mode","slug":"/operation-mode/c-aurora-js-example-script-lifecycle","permalink":"/zebra-aurora-docs/docs/operation-mode/c-aurora-js-example-script-lifecycle","draft":false,"unlisted":false,"editUrl":"https://github.com/bnc438/zebra-aurora-docs/tree/main/docs/operation-mode/c-aurora-js-example-script-lifecycle.mdx","tags":[],"version":"current","sidebarPosition":22,"frontMatter":{"sidebar_position":22,"title":"Example Script Lifecycle"},"sidebar":"tutorialSidebar","previous":{"title":"Script Invocation","permalink":"/zebra-aurora-docs/docs/operation-mode/t-aurora-js-script-invocation"},"next":{"title":"Managing Execution Time","permalink":"/zebra-aurora-docs/docs/operation-mode/t-aurora-js-managing-execution-time"}}');var o=n(4848),i=n(8453);const a={sidebar_position:22,title:"Example Script Lifecycle"},s="Example Script Lifecycle",c={},l=[];function d(e){const t={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"example-script-lifecycle",children:"Example Script Lifecycle"})}),"\n",(0,o.jsx)(t.p,{children:"The lifecycle of the script includes four stages: deployment, two iterations, and edit mode."}),"\n",(0,o.jsxs)(t.p,{children:["In the deployment stage, the execution environment is prepared without actions. In the first iteration, global variables are initialized, and syntax errors are checked. The ",(0,o.jsx)(t.code,{children:"onResults"})," function processes the ",(0,o.jsx)(t.code,{children:"Test String"}),", updates counters, and logs results. The second iteration skips initialization and processes the ",(0,o.jsx)(t.code,{children:"Wrong String"}),", adjusts counters, and logs accordingly. Finally, the script enters edit mode, unloading from memory, with variables set to reinitialize upon redeployment."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:'console.log("Script loading begin");\r\nlet no_match_counter = 0;\r\nlet match_counter = 0;\r\nconst match_string = "Test String";\r\nlet counter = 0;\r\n\r\n/** Returns the OutputResult type object\r\n* @param {InputResult} inputResult  \r\n* @returns {OutputResult}*/\r\nexport function onResults(inputResult) {\r\n  console.log("onResult called count: ", counter);\r\n  counter++; // select first decode for first tool  \r\n  if (inputResult.tools.decodes === match_string) {\r\n      match_counter++;\r\n  } else {\r\n      no_match_counter++;\r\n      console.error("No match string find!");\r\n      return {\r\n          common: "Match count: " + match_counter + " No match count: " + no_match_counter\r\n      };\r\n  }\r\n  console.log("Script loading end");\r\n}\r\n\r\nThere are four main stages in the lifecycle of a script:\r\n\r\nDeploy the job to initialize the script\'s execution environment.\r\n\r\nIteration 1:\r\n\r\nThe code outside the onResults function is executed. The global variables no_match_counter, match_counter, match_string, and counter are created and initialized. The console.log functions are executed. Any syntax errors in the script are reported at this stage, and its execution is performed if errors are detected.\r\n\r\nThe onResults function is executed. Assume that in this iteration, the read code contains a string, e.g., Test String.\r\n\r\nValues are set, and logs are sent during this stage.\r\n\r\nThe following string is sent to all available communication channels: Match count: 1 No match count: 0.\r\n\r\nAurora Focus receives logs in the following order: Script loading begins, Script loading end, onResult called count: 0.\r\n\r\nGlobal variables at the end of the script are as follows: no_match_counter = 0, match_counter = 1, counter = 1.\r\n\r\nIteration 2:\r\n\r\nNo initialization phase.\r\n\r\nThe onResults function is executed. Assume that in this iteration, the read code contains the string, e.g., Wrong String.\r\n\r\nValues are set, and logs are sent during this stage.\r\n\r\nThe following string is sent to all available communication channels: Match count: 1 No match count: 1.\r\n\r\nAurora Focus receives logs in the following order: onResult called count: 0 and No match string find!. The second log belongs to a different category, as noted in the editor console.\r\n\r\nGlobal variables at the end of the script are as follows: no_match_counter = 1, match_counter = 1, counter = 2.\r\n\r\nEdit the job and unload the script from memory.\r\n\r\n:::note\r\nDuring the next deployment, the variables from Step 2a are re-initialized.\r\n:::\r\n\r\n:::note\r\nEach execution is always the first one when using an emulator or performing jobs on the camera while editing.\r\n:::\n'})})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>s});var r=n(6540);const o={},i=r.createContext(o);function a(e){const t=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);